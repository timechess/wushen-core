战斗为自动进行的文字游戏，根据角色的三维以及战前装备的内功与武技决定战斗面板，具体见[[项目/游戏/角色系统|角色系统]]。

战斗过程可以被视为状态机，初始化总行动条，检视双方词条中在战斗开始时生效的部分，使其生效后进入战斗循环，每个时间步双方根据出手速度在行动条上前进一段距离，若达到其武技蓄力时间，则扣除该角色行动条并开始行动。

战斗由一个个战斗回合构成，每个战斗回合都分攻击者与防御者，词条触发事件的顺序为：攻击者攻击时，防御者防御时，攻击者攻击后，防御者防御后。中间进行战斗结算，结算步骤为：

1. 攻击者回气，不超过内息量上限
2. 计算攻击者输出，根据词条生效后面板，计算公式如下：
$$
\text{总输出}=(\text{基础攻击力}+\min(\text{当前内息}, \text{内息量}\times \text{内息输出}))\times \text{内息质量}\times \text{威能} \times \text{增伤}
$$
3. 计算防御者防御力，根据词条生效后面板，计算公式如下：
$$
\text{总防御力}=(\text{基础防御力}+\min(\text{当前内息}, \text{内息量}\times \text{内息输出})) \times \text{内息质量} \times \text{守御}
$$
4. 计算减伤后攻击者输出，即 $\text{减伤后输出}=\text{总输出}\times (1-\text{防御者减伤})$
5. 比较减伤后输出与防御者防御力，若输出大于防御力，则扣除防御者生命值差值，且扣除防御者此次消耗的内息量，否则不造成生命值伤害，扣除防御者内息值为 $\text{减伤后输出}\times \min(\text{当前内息}, \text{内息量}\times \text{内息输出}) / \text{总防御力}$。无论是否击破内息防御，攻击者均要消耗内息。
6. 将以上计算结果，包括总输出、总防御力、减伤后输出、攻击者内息消耗、防御者内息消耗、是否击破内息防御，记录下来，传递给后续词条结算使用。

再完成攻击者攻击后、防御者防御后两个阶段的词条结算，进入战斗回合结束结算阶段，结算该阶段词条。

当某方战斗回合一切结算结束后HP为0，则战斗结束。

注意由于战斗为文字游戏，需要维护战斗记录队列，每个战斗词条结算时都需要往队列中添加独有的信息，该方法应当在词条中实现。同时战斗记录还需包含每次攻击的结果，攻击者攻击武技和防御者防御武技都应当有独特的战斗文本。